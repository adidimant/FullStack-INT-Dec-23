"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.VideoSupportCollector = void 0;
class VideoSupportCollector {
  data = null;
  constructor(interval) {
    this.interval = interval;
  }
  getData() {
    return this.data;
  }
  getKey() {
    return 'videoSupport';
  }
  startCollect() {
    try {
      this.collectData();
      setInterval(() => {
        try {
          this.collectData();
        } catch (error) {
          console.error('Error collecting video support:', error);
          this.data = null;
        }
      }, this.interval);
    } catch (error) {
      console.error('Failed to start video support collection:', error);
    }
  }
  finishCollect() {
    this.data = null;
  }
  collectData() {
    try {
      const video = document.createElement('video');
      this.data = {
        mp4: video.canPlayType('video/mp4').replace(/no/, '') !== '',
        webm: video.canPlayType('video/webm').replace(/no/, '') !== '',
        ogg: video.canPlayType('video/ogg').replace(/no/, '') !== ''
      };
    } catch (error) {
      console.error('Error getting video support:', error);
      this.data = null;
    }
  }
}
exports.VideoSupportCollector = VideoSupportCollector;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWaWRlb1N1cHBvcnRDb2xsZWN0b3IiLCJkYXRhIiwiY29uc3RydWN0b3IiLCJpbnRlcnZhbCIsImdldERhdGEiLCJnZXRLZXkiLCJzdGFydENvbGxlY3QiLCJjb2xsZWN0RGF0YSIsInNldEludGVydmFsIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluaXNoQ29sbGVjdCIsInZpZGVvIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibXA0IiwiY2FuUGxheVR5cGUiLCJyZXBsYWNlIiwid2VibSIsIm9nZyIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29sbGVjdG9ycy9yZWd1bGFyL1ZpZGVvU3VwcG9ydENvbGxlY3Rvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0b3IgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL0NvbGxlY3Rvcic7XG5cbmludGVyZmFjZSBWaWRlb1N1cHBvcnQge1xuICBtcDQ6IGJvb2xlYW47XG4gIHdlYm06IGJvb2xlYW47XG4gIG9nZzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFZpZGVvU3VwcG9ydENvbGxlY3RvciBpbXBsZW1lbnRzIENvbGxlY3RvcjxWaWRlb1N1cHBvcnQ+IHtcbiAgcHVibGljIGludGVydmFsOiBudW1iZXI7XG4gIHByaXZhdGUgZGF0YTogVmlkZW9TdXBwb3J0IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoaW50ZXJ2YWw6IG51bWJlcikge1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgfVxuXG4gIGdldERhdGEoKTogVmlkZW9TdXBwb3J0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAndmlkZW9TdXBwb3J0JztcbiAgfVxuXG4gIHN0YXJ0Q29sbGVjdCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5jb2xsZWN0RGF0YSgpO1xuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY29sbGVjdERhdGEoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb2xsZWN0aW5nIHZpZGVvIHN1cHBvcnQ6JywgZXJyb3IpO1xuICAgICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMuaW50ZXJ2YWwpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgdmlkZW8gc3VwcG9ydCBjb2xsZWN0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmaW5pc2hDb2xsZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGNvbGxlY3REYXRhKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICB0aGlzLmRhdGEgPSB7XG4gICAgICAgIG1wNDogdmlkZW8uY2FuUGxheVR5cGUoJ3ZpZGVvL21wNCcpLnJlcGxhY2UoL25vLywgJycpICE9PSAnJyxcbiAgICAgICAgd2VibTogdmlkZW8uY2FuUGxheVR5cGUoJ3ZpZGVvL3dlYm0nKS5yZXBsYWNlKC9uby8sICcnKSAhPT0gJycsXG4gICAgICAgIG9nZzogdmlkZW8uY2FuUGxheVR5cGUoJ3ZpZGVvL29nZycpLnJlcGxhY2UoL25vLywgJycpICE9PSAnJ1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB2aWRlbyBzdXBwb3J0OicsIGVycm9yKTtcbiAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgfVxuICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFRTyxNQUFNQSxxQkFBcUIsQ0FBb0M7RUFFNURDLElBQUksR0FBd0IsSUFBSTtFQUV4Q0MsV0FBV0EsQ0FBQ0MsUUFBZ0IsRUFBRTtJQUM1QixJQUFJLENBQUNBLFFBQVEsR0FBR0EsUUFBUTtFQUMxQjtFQUVBQyxPQUFPQSxDQUFBLEVBQXdCO0lBQzdCLE9BQU8sSUFBSSxDQUFDSCxJQUFJO0VBQ2xCO0VBRUFJLE1BQU1BLENBQUEsRUFBVztJQUNmLE9BQU8sY0FBYztFQUN2QjtFQUVBQyxZQUFZQSxDQUFBLEVBQVM7SUFDbkIsSUFBSTtNQUNGLElBQUksQ0FBQ0MsV0FBVyxDQUFDLENBQUM7TUFDbEJDLFdBQVcsQ0FBQyxNQUFNO1FBQ2hCLElBQUk7VUFDRixJQUFJLENBQUNELFdBQVcsQ0FBQyxDQUFDO1FBQ3BCLENBQUMsQ0FBQyxPQUFPRSxLQUFLLEVBQUU7VUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUMsaUNBQWlDLEVBQUVBLEtBQUssQ0FBQztVQUN2RCxJQUFJLENBQUNSLElBQUksR0FBRyxJQUFJO1FBQ2xCO01BQ0YsQ0FBQyxFQUFFLElBQUksQ0FBQ0UsUUFBUSxDQUFDO0lBQ25CLENBQUMsQ0FBQyxPQUFPTSxLQUFLLEVBQUU7TUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUMsMkNBQTJDLEVBQUVBLEtBQUssQ0FBQztJQUNuRTtFQUNGO0VBRUFFLGFBQWFBLENBQUEsRUFBUztJQUNwQixJQUFJLENBQUNWLElBQUksR0FBRyxJQUFJO0VBQ2xCO0VBRVFNLFdBQVdBLENBQUEsRUFBUztJQUMxQixJQUFJO01BQ0YsTUFBTUssS0FBSyxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxPQUFPLENBQUM7TUFDN0MsSUFBSSxDQUFDYixJQUFJLEdBQUc7UUFDVmMsR0FBRyxFQUFFSCxLQUFLLENBQUNJLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFO1FBQzVEQyxJQUFJLEVBQUVOLEtBQUssQ0FBQ0ksV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUU7UUFDOURFLEdBQUcsRUFBRVAsS0FBSyxDQUFDSSxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUs7TUFDNUQsQ0FBQztJQUNILENBQUMsQ0FBQyxPQUFPUixLQUFLLEVBQUU7TUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztNQUNwRCxJQUFJLENBQUNSLElBQUksR0FBRyxJQUFJO0lBQ2xCO0VBQ0Y7QUFDRjtBQUFDbUIsT0FBQSxDQUFBcEIscUJBQUEsR0FBQUEscUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=