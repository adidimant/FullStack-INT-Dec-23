"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DoNotTrackCollector = void 0;
class DoNotTrackCollector {
  data = null;
  constructor(interval) {
    this.interval = interval;
  }
  getData() {
    return this.data;
  }
  getKey() {
    return 'doNotTrack';
  }
  startCollect() {
    try {
      this.collectData();
      setInterval(() => {
        try {
          this.collectData();
        } catch (error) {
          console.error('Error collecting Do Not Track status:', error);
          this.data = null;
        }
      }, this.interval);
    } catch (error) {
      console.error('Failed to start Do Not Track collection:', error);
    }
  }
  finishCollect() {
    this.data = null;
  }
  collectData() {
    try {
      this.data = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
    } catch (error) {
      console.error('Error getting Do Not Track status:', error);
      this.data = null;
    }
  }
}
exports.DoNotTrackCollector = DoNotTrackCollector;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEb05vdFRyYWNrQ29sbGVjdG9yIiwiZGF0YSIsImNvbnN0cnVjdG9yIiwiaW50ZXJ2YWwiLCJnZXREYXRhIiwiZ2V0S2V5Iiwic3RhcnRDb2xsZWN0IiwiY29sbGVjdERhdGEiLCJzZXRJbnRlcnZhbCIsImVycm9yIiwiY29uc29sZSIsImZpbmlzaENvbGxlY3QiLCJuYXZpZ2F0b3IiLCJkb05vdFRyYWNrIiwid2luZG93IiwibXNEb05vdFRyYWNrIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb2xsZWN0b3JzL3JlZ3VsYXIvRG9Ob3RUcmFja0NvbGxlY3Rvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0b3IgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL0NvbGxlY3Rvcic7XG5cbmV4cG9ydCBjbGFzcyBEb05vdFRyYWNrQ29sbGVjdG9yIGltcGxlbWVudHMgQ29sbGVjdG9yPHN0cmluZyB8IG51bGw+IHtcbiAgcHVibGljIGludGVydmFsOiBudW1iZXI7XG4gIHByaXZhdGUgZGF0YTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoaW50ZXJ2YWw6IG51bWJlcikge1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgfVxuXG4gIGdldERhdGEoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnZG9Ob3RUcmFjayc7XG4gIH1cblxuICBzdGFydENvbGxlY3QoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY29sbGVjdERhdGEoKTtcbiAgICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmNvbGxlY3REYXRhKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29sbGVjdGluZyBEbyBOb3QgVHJhY2sgc3RhdHVzOicsIGVycm9yKTtcbiAgICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLmludGVydmFsKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHN0YXJ0IERvIE5vdCBUcmFjayBjb2xsZWN0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmaW5pc2hDb2xsZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGNvbGxlY3REYXRhKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRhdGEgPSBuYXZpZ2F0b3IuZG9Ob3RUcmFjayB8fCAod2luZG93IGFzIGFueSkuZG9Ob3RUcmFjayB8fCAobmF2aWdhdG9yIGFzIGFueSkubXNEb05vdFRyYWNrO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIERvIE5vdCBUcmFjayBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgdGhpcy5kYXRhID0gbnVsbDtcbiAgICB9XG4gIH1cbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVPLE1BQU1BLG1CQUFtQixDQUFxQztFQUUzREMsSUFBSSxHQUFrQixJQUFJO0VBRWxDQyxXQUFXQSxDQUFDQyxRQUFnQixFQUFFO0lBQzVCLElBQUksQ0FBQ0EsUUFBUSxHQUFHQSxRQUFRO0VBQzFCO0VBRUFDLE9BQU9BLENBQUEsRUFBa0I7SUFDdkIsT0FBTyxJQUFJLENBQUNILElBQUk7RUFDbEI7RUFFQUksTUFBTUEsQ0FBQSxFQUFXO0lBQ2YsT0FBTyxZQUFZO0VBQ3JCO0VBRUFDLFlBQVlBLENBQUEsRUFBUztJQUNuQixJQUFJO01BQ0YsSUFBSSxDQUFDQyxXQUFXLENBQUMsQ0FBQztNQUNsQkMsV0FBVyxDQUFDLE1BQU07UUFDaEIsSUFBSTtVQUNGLElBQUksQ0FBQ0QsV0FBVyxDQUFDLENBQUM7UUFDcEIsQ0FBQyxDQUFDLE9BQU9FLEtBQUssRUFBRTtVQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyx1Q0FBdUMsRUFBRUEsS0FBSyxDQUFDO1VBQzdELElBQUksQ0FBQ1IsSUFBSSxHQUFHLElBQUk7UUFDbEI7TUFDRixDQUFDLEVBQUUsSUFBSSxDQUFDRSxRQUFRLENBQUM7SUFDbkIsQ0FBQyxDQUFDLE9BQU9NLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQywwQ0FBMEMsRUFBRUEsS0FBSyxDQUFDO0lBQ2xFO0VBQ0Y7RUFFQUUsYUFBYUEsQ0FBQSxFQUFTO0lBQ3BCLElBQUksQ0FBQ1YsSUFBSSxHQUFHLElBQUk7RUFDbEI7RUFFUU0sV0FBV0EsQ0FBQSxFQUFTO0lBQzFCLElBQUk7TUFDRixJQUFJLENBQUNOLElBQUksR0FBR1csU0FBUyxDQUFDQyxVQUFVLElBQUtDLE1BQU0sQ0FBU0QsVUFBVSxJQUFLRCxTQUFTLENBQVNHLFlBQVk7SUFDbkcsQ0FBQyxDQUFDLE9BQU9OLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyxvQ0FBb0MsRUFBRUEsS0FBSyxDQUFDO01BQzFELElBQUksQ0FBQ1IsSUFBSSxHQUFHLElBQUk7SUFDbEI7RUFDRjtBQUNGO0FBQUNlLE9BQUEsQ0FBQWhCLG1CQUFBLEdBQUFBLG1CQUFBIiwiaWdub3JlTGlzdCI6W119